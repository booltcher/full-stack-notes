## Vue组件的data必须是个函数而Vue根实例则没有限制？

#### src/core/instance/state.js - initData()

函数每次执行都会返回全新data对象实例

在Vue实例初始化的过程中，初始化data时，initState - initData

会先对data的类型做判断，如果data是一个function，则执行这个function并把执行的结果当做data的值

否则，直接使用data，如果是这种情况，将来我们访问实例的属性其实都是一个引用，那会造成这个属性被共享或者说被污染，这是不合理的，其中一个组件内修改了这个属性，其它的组件属性也会被修改

程序甚至无法通过vue内部检测。会报错说：data选项应该是一个函数，它返回一个组件的声明



**结论：保证实例之间的数据相互独立**



#### 根实例为什么可以使用对象？

###### 全局只会声明一个根实例

在源码中：

#### src/core/instance/init.js - initMixin()



在进行选项的合并时，会判断选项里的_isComponent这个值

会走不同的分支，如果是根实例，当时并没有组件实例，所以会跳过这个检测